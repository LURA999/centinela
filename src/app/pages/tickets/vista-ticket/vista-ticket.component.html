<div  fxLayout="row" fxLayoutAlign="center none" class="matCardTop" [class.example-is-mobile]="mobileQuery.matches">
    <div fxFlex="95%">
        <mat-card *ngIf="load">
            <mat-card-content >
              <div class="cabecera">
                <div class="botonesPrincipales">
                  <button mat-raised-button color="primary">Responder<mat-icon>subdirectory_arrow_left</mat-icon></button> 
                  <button mat-raised-button color="primary">Añadir nota<mat-icon>note</mat-icon></button>
                  <button mat-raised-button color="primary">Eliminar <mat-icon>delete</mat-icon></button>
                </div>
                <div class="menu">
                  <button mat-button [matMenuTriggerFor]="menu">...</button>
                  <mat-menu #menu="matMenu" mat-raised-button color="primary">
                  <!--  <button mat-menu-item >...</button> -->
                  </mat-menu>
                </div>
              </div>
              <div class="sidenav-content" [hidden]="open > 1000">
                <button type="button"  mat-button (click)="propiedades.toggle()" (click)="desplazarNavPropiedades()"><mat-icon>toc</mat-icon> </button>
                <button  type="button" mat-button (click)="datosContacto.toggle()" (click)="desplazarNavDatosContacto()"><mat-icon>toc</mat-icon> </button>
                </div>
              <div class="bDato" [hidden]="open < 1000">
                <button  type="button" mat-button (click)="propiedades.toggle()" (click)="desplazarNavPropiedades()"><mat-icon>toc</mat-icon> </button>
                </div>
                <mat-sidenav-container class="container-child" autosize>
                    <mat-sidenav #datosContacto  [opened]="cambiarResponsive() >= 1000 " [mode]="mobileQuery.matches ? 'over' : 'side'"
                    [fixedInViewport]="mobileQuery.matches" fixedTopGap="56" id="sidenavContacto" style="background-color: #FFFFFF; padding-left: 16px; padding-right: 16px; overflow-y: auto;"  position="end">
                    <!-- fixedTopGap=145-->
                      <br>
                          <h4>Datos de servicio </h4>
                          <div id="datos">
                              <div >
                              <span ><b>Empresa: </b> {{datosTicket.cliente}}</span>
                              </div>
                              <div >
                              <span ><b>Nombre del Servicio: </b> {{datosTicket.servicio}}</span>
                              </div>
                              <div >
                              <span ><b>Plan: </b> {{datosTicket.plan}}</span>
                              </div>

                              <div >
                                <b>Ping radio:</b> <br/>
                                <div *ngFor="let i of pingRadio; let o =index" class="device">
                                    {{i.ping}} ({{i.ip}})<div><div [ngStyle]="{background: i.color}" class="circulo"></div></div>
                                </div>
                              </div>
                              <br/>   
                              <div >
                                <b>Ping router:</b> <br/>
                                <div *ngFor="let i of pingRouter; let o =index" class="device">
                                    {{i.ping}} ({{i.ip}})<div><div [ngStyle]="{background: i.color}" class="circulo"></div></div>
                                </div>
                              </div>
                              <br/>
                              <div >
                              <b>Ping otro:</b> <br/>
                              <div *ngFor="let i of pingOtro; let o =index" class="device">
                                  {{i.ping}} ({{i.ip}})<div><div [ngStyle]="{background: i.color}" class="circulo"></div></div>
                              </div>
                            </div>
                            <div > <br>
                              <b>Repetidoras: </b> <br/>
                              <div *ngFor="let i of repetidoras; let o =index" class="device">
                                  {{i}}
                              </div>
                            </div>
                          </div>
                          <br>
                          <mat-divider></mat-divider>
                          <br>
                          <div class="datos-extras">
                            <h4>Datos de contacto</h4>
                            <div >
                              <div class="datosPerfil">
                                <div><img src="../../../../assets/alonso.jpg" width="50px" height="50px"></div>
                                <div>
                                  {{datosTicket.contacto}}<br>
                                  {{datosTicket.cliente}}
                                </div>
                              </div>
                              <br>
                              <div>
                                <ng-container *ngIf="datosTicket.correo.length > 27; else elseTemplate">
                                  <span [title]="datosTicket.correo"><b>Correo: </b>{{datosTicket.correo.substring(0,22)+"..."}}</span>
                                </ng-container>
                                <ng-template #elseTemplate>
                                  <span ><b>Correo: </b>{{datosTicket.correo}}</span>
                                </ng-template>
                              </div>
                              <div>
                                <b>Numero: </b><span>{{datosTicket.celular}}</span>
                              </div>
                              <div>
                                <b>Puesto: </b><span>{{datosTicket.puesto}}</span>
                              </div>
                            </div>
                          </div>
                          
                    </mat-sidenav>
                      <mat-sidenav #propiedades  [opened]="open >= 1000" [mode]="mobileQuery.matches ? 'over' :'side'"
                    [fixedInViewport]="mobileQuery.matches" fixedTopGap="56" [style.z-index]=" open >1000?1:3"
                    [style.margin-left]="open < 1000? '-52px':''"
                    id="sidenavProp"  style="background-color: #FFFFFF; padding-left:40px; padding-right:40px; " [position]="position ===false ? 'end':'start'"  [style.margin-right]="moveProp ===false && moveDatos === false?'210px': '0px' "> 
                      <br>
                      <form [formGroup]="form">
                              <h3>Actualizar Ticket</h3>
                              <div>
                                <b>Numero de ticket: {{idTicket}}</b>
                              </div>
                              <br/>
                              <div class="input" >
                                <mat-form-field appearance="fill">
                                  <mat-label>Grupo</mat-label>
                                  <mat-select [value]="datosTicket.cveGrupo.toString()" (selectionChange)="buscarUsuarios($event.value)" #grupoNav>
                                      <mat-option value="1">Administrador</mat-option>
                                        <mat-option value="2">Soporte</mat-option>
                                        <mat-option value="3">Comercial</mat-option>
                                        <mat-option value="4">Administracion</mat-option>
                                  </mat-select>
                                </mat-form-field>
                              </div>
                              <div class="input">
                                <mat-form-field class="example-full-width" appearance="fill">
                                  <mat-label>Agente</mat-label>
                                  <input type="mensaje"
                                        placeholder="Pick one"
                                        aria-label="Creado"
                                        matInput
                                        [value]="variable"
                                        [formControl]="myControl"
                                        [matAutocomplete]="auto4">
                                  <mat-autocomplete autoActiveFirstOption  #auto4="matAutocomplete">   
                                    <mat-option  *ngFor="let option of filteredOptions  | async"  [value]="option.usuario" >
                                      {{option.usuario}}
                                    </mat-option>
                                  </mat-autocomplete>
                                </mat-form-field>
                              </div>
                              <div class="input" >
                                <mat-form-field appearance="fill">
                                    <mat-label>Tipo</mat-label>
                                    <mat-select [value]="datosTicket.tipo.toString()">
                                      <mat-option value=0>Ninguno</mat-option>
                                        <mat-option value=1>Soporte</mat-option>
                                        <mat-option value=2>Atencion</mat-option>
                                        <mat-option value=3>Solicitud</mat-option>
                                    </mat-select>
                                </mat-form-field>
                              </div>
                              <div class="input">
                                <mat-form-field appearance="fill">
                                  <mat-label>Prioridad</mat-label>
                                  <mat-select [value]="datosTicket.prioridad.toString()">
                                    <mat-option value="1">Baja</mat-option>
                                    <mat-option value="2">Media</mat-option>
                                    <mat-option value="3">Alta</mat-option>
                                    <mat-option value="4">Urgente</mat-option>
                                  </mat-select>
                                </mat-form-field>
                              </div>
                              <button mat-raised-button color="primary" >Actualizar <mat-icon>update</mat-icon></button>
                              <div class="boton"   >
                                <button type="button" [hidden]="open < 1000" style="margin-top: 90px;" mat-button (click)="datosContacto.toggle()" (click)="desplazarNavDatosContacto()">
                                  <mat-icon>keyboard_tab</mat-icon>          
                               </button>
                             </div>
                            </form>
                          
                      </mat-sidenav>
                      <!--Se maneja la logica de los dos sidevar, la primera parte es cuando se trata de 
                      dispositivos mas pequeños y si no es asi, entonces se va a la segunda parte-->
                      <div id="box-c"  [style.background] = "'#FFFFFF'"
                      [style.margin-right]=" (open <1000?'auto' :(moveProp === true && moveDatos === true ?
                      '0px':(moveDatos ===true && moveProp === false? '0px': '210px')))" >
                          <mat-grid-list *ngFor="let com of comment" cols="4" 
                          >
                              <mat-divider></mat-divider>
                              <h2 [hidden]="com.asunto===undefined "><b>{{com.asunto}}</b></h2>
                              <span [hidden]="com.creado===undefined ">Creado por <b>{{com.creado}}</b></span>

                              <p [hidden]="com.informado===undefined "><b>{{com.informado}}</b> Informado por {{com.dispositivo}}</p>
                              <div [hidden]="com.usuarioRespondido===undefined "><b>{{com.usuarioRespondido}}</b> Respondio</div>
                              <div [hidden]="com.grupo===undefined && com.agente===undefined"><b>{{com.usuarioRespondido}}</b> escalo el ticket a <b>Grupo:</b> {{com.grupo}} <b>Agente:</b> {{com.agente}}</div>
                              <div>{{date.toLocaleDateString("es-ES",optionsDate)}}</div> 
                              <br>
                              
                              <blockquote >
                                <p [hidden]="com.mensaje===undefined">{{com.mensaje}}</p>
                              </blockquote>
                            </mat-grid-list>
                            <div> 
                          </div>
                        </div>
                      <div [style.width]="open<1000?'100%':
                      (moveProp === false && moveDatos === false ?'calc(100% - 210px)':
                      (moveDatos === false && moveProp === true? 'calc(100% - 212px)':'100%'))">
                        <div class="botonesComentarios">
                          <button mat-stroked-button color="primary">Responder</button> <button mat-stroked-button color="primary"> Añadir Nota <mat-icon>note</mat-icon></button>
                        </div>
                        <textarea placeholder="Escribe un comentario..." id="res" 
                          rows="10"></textarea>
                        <div class="botonRes">
                          <button mat-raised-button color="primary">Responder <mat-icon>send</mat-icon></button>
                        </div>
                      </div>
                      </mat-sidenav-container>
            </mat-card-content>  
        </mat-card>
    </div>
</div>
